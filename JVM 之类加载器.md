# JVM 之类加载器



JVM是在操作系统上的一个小的虚拟环境，用来运行java程序，这也是为什么java能够跨平台的重要原因。



## 定义

类加载器，是程序运行周期的一部分，发生在由javac编译之后产生了.class文件，这时候就需要jvm的类加载器，将相关的**类信息**加载到内存中，这里的**类信息**可以看作java反射的底层原理，**类信息也就是产生对象的模板，每个类只有一个**

``` java
Class<A> b = A.class //b就是类A的模板，类A的类信息
```



下图为类加载器的过程



![类加载器](C:\Users\ZHW\Desktop\笔记\IMG\类加载器.jpg)

## 类加载器类型

* 应用类加载器->扩展类加载器->启动类加载器，以及用户自定义加载类



## 加载机制:

* 双亲委派机制

* 当**应用类加载器**得到加载请求，会把请求拿给父类加载器处理，也就是扩展类加载器
* **扩展类加载器**会再把请求发给父类，层层往上传递，直到**启动类加载器**
* 启动类加载器，会查找自己管理的所谓启动类，实质为JAVA核心库，处理请求，若无法加载，才会往回传。若最后的应用类加载器也无法加载，就会抛出异常(class not found)





![类加载器2](C:\Users\ZHW\Desktop\笔记\IMG\类加载器2.png)

## 双亲委派的原因

为何这样加载的原因，是为了保证java核心库安全，一些基本类，不会出现很多版本，假如不往上传递请求，应用类处理一个java.lang.object（自己写的），可能会出现两个一样的Object类，就会造成混乱

但是双亲委派机制，就可以保证，加载的类一定是核心库里面的类，你即使写了一个Object类，**类的全限名**一样，也无法加载这个类，它只会加载Java核心库里那个